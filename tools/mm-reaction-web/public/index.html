<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Mattermost Reaction Web</title>
  <link rel="stylesheet" href="/styles.css" />
</head>
<body>
  <div class="container">
    <h1>Mattermost Reaction Web</h1>

    <section class="panel">
      <h2>서버/대상 정보</h2>
      <div class="form-row">
        <label>Base URL</label>
        <input id="baseUrl" placeholder="https://your-mattermost.example.com" />
      </div>
      <div class="form-row">
        <label>Session Cookie</label>
        <input id="sessionCookie" placeholder="MMAUTHTOKEN=...; MMCSRF=... (로그인 성공 시 자동 채움)" />
      </div>
      <div class="form-row">
        <label>MMAUTHTOKEN</label>
        <input id="mmauthtoken" type="password" placeholder="MMAUTHTOKEN 값" />
      </div>
      <div class="form-row">
        <label>MMCSRF (선택)</label>
        <input id="mmcsrf" placeholder="MMCSRF 값(있는 경우)" />
      </div>
      <div class="actions" style="gap:8px;margin-top:4px;">
        <button id="composeCookieBtn" type="button">Session Cookie 자동 구성</button>
        <small>위 두 값을 알고 있다면 버튼 클릭으로 Session Cookie 칸이 자동 완성됩니다.</small>
      </div>
      <div class="form-row">
        <label>Post ID</label>
        <button id="pastePostIdBtn" type="button" style="margin-right:8px;">붙여넣기</button>
        <input id="postId" placeholder="target post id" />
      </div>
      <div class="form-row">
        <label>Delay (ms)</label>
        <input id="delayMs" type="number" value="30" />
      </div>
      <div class="actions">
        <button id="loadEmojisBtn">이모지 불러오기</button>
        <button id="sendReactionsBtn" class="primary">선택 이모지 반응 보내기</button>
      </div>
    </section>

    <section class="panel">
      <h2>선택한 이모지 (전송 순서)</h2>
      <div class="panel-sub">
        <h3>선택 로그</h3>
        <pre id="selectLog" class="mini-log"></pre>
      </div>
      <div class="actions" style="gap:8px;margin-bottom:8px;">
        <button id="popSelectedBtn" type="button">맨뒤 제거</button>
        <button id="clearSelectedBtn" type="button">전체 비우기</button>
      </div>
      <div class="actions" style="gap:8px;margin:4px 0 8px 0;flex-wrap:wrap;align-items:center;">
        <label style="color:var(--muted);font-size:12px;">프리셋</label>
        <select id="presetSelect" style="min-width:180px;"></select>
        <input id="presetName" placeholder="프리셋 이름" style="min-width:180px;" />
        <button id="savePresetBtn" type="button">저장</button>
        <button id="loadPresetBtn" type="button">불러오기(교체)</button>
        <button id="appendPresetBtn" type="button">추가로 불러오기</button>
        <button id="deletePresetBtn" type="button">삭제</button>
      </div>
      <div id="selectedList" class="selected-list"></div>
    </section>

    <section class="panel">
      <div class="toolbar">
        <input id="search" placeholder="이름 검색..." />
        <button id="searchBtn" type="button">검색</button>
        <span id="searchStatus" style="color:var(--muted);font-size:12px;margin-left:8px;"></span>
        <button id="reindexBtn" type="button" title="인덱스 TTL을 무시하고 다시 구축">인덱스 재구축</button>
        <div class="paging" style="display:flex;align-items:center;gap:8px;">
          <label for="perPage" style="color:var(--muted);font-size:12px;">Per page</label>
          <input id="perPage" type="number" value="200" min="20" max="1000" step="20" style="width:90px;padding:6px 8px;border-radius:8px;border:1px solid #374151;background:#0b1220;color:var(--text)" />
          <button id="prevPageBtn" type="button">이전</button>
          <span id="pageInfo" style="color:var(--muted);"></span>
          <button id="nextPageBtn" type="button">다음</button>
          <span id="emojiCount"></span>
        </div>
      </div>
      <div id="emojiGrid" class="grid"></div>
    </section>

    <section class="panel">
      <h2>로그</h2>
      <pre id="log"></pre>
    </section>
  </div>

  <script src="/app.js"></script>
</body>
</html>
